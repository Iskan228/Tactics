#include "minttypes.h"

static u8 rands[256] = {205U, 38U, 147U, 222U, 233U, 157U, 186U, 11U, 170U, 249U, 80U, 145U, 78U, 44U, 27U, 222U, 217U, 190U, 39U, 83U, 20U, 19U, 164U, 209U, 139U, 114U, 104U, 76U, 119U, 128U, 39U, 82U, 188U, 80U, 211U, 245U, 223U, 185U, 76U, 241U, 32U, 16U, 200U, 134U, 156U, 244U, 18U, 224U, 167U, 82U, 26U, 129U, 58U, 74U, 235U, 141U, 169U, 29U, 126U, 97U, 127U, 203U, 130U, 97U, 176U, 136U, 155U, 101U, 1U, 181U, 25U, 159U, 220U, 125U, 191U, 127U, 97U, 201U, 141U, 91U, 244U, 161U, 45U, 95U, 33U, 190U, 243U, 156U, 7U, 84U, 14U, 163U, 33U, 216U, 221U, 152U, 184U, 218U, 3U, 32U, 181U, 157U, 55U, 16U, 43U, 159U, 87U, 81U, 94U, 169U, 205U, 206U, 134U, 156U, 204U, 230U, 37U, 161U, 103U, 64U, 34U, 218U, 16U, 109U, 146U, 77U, 140U, 57U, 79U, 28U, 206U, 34U, 72U, 201U, 229U, 202U, 190U, 157U, 92U, 219U, 58U, 221U, 58U, 63U, 138U, 252U, 13U, 20U, 134U, 109U, 24U, 66U, 228U, 59U, 37U, 32U, 238U, 20U, 12U, 15U, 86U, 234U, 102U, 110U, 242U, 214U, 136U, 215U, 177U, 101U, 66U, 1U, 134U, 244U, 102U, 61U, 149U, 65U, 175U, 241U, 111U, 227U, 1U, 240U, 153U, 201U, 147U, 36U, 56U, 98U, 1U, 106U, 21U, 168U, 218U, 16U, 207U, 169U, 177U, 205U, 135U, 175U, 36U, 176U, 186U, 199U, 7U, 222U, 164U, 180U, 21U, 141U, 242U, 15U, 70U, 37U, 251U, 158U, 74U, 236U, 94U, 177U, 55U, 39U, 61U, 133U, 230U, 27U, 231U, 113U, 20U, 200U, 43U, 249U, 198U, 222U, 53U, 116U, 0U, 192U, 29U, 103U, 79U, 254U, 9U, 64U, 48U, 63U, 39U, 158U, 226U, 240U, 50U, 199U, 165U, 168U};
static u8 posRand = 0;

void mSrand(u8 num)
{
    for(u8 i = 0; i < 255; i++)
    {
        #ifdef UINT_LEAST8_MAX
            rands[i] = UINT8_C((num + rands[i]) % UINT_LEAST8_MAX);
        #else
            rands[i] = UINT8_C((num + rands[i]) % 256);
        #endif // UINT_LEAST8_MAX
    }
}

u8 mGetRand(void)
{
    if(posRand == 255)
    {
        posRand = 0;
        return rands[0];
    }
    return rands[posRand++];
}
